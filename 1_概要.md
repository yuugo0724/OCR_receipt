# 領収書の光学文字認識
領収書をOCRで読み取り、日付別・経費の種類別でラベリングする  
試作品として作成するシステムは「接待交際費(飲食店)」「定期代」「それ以外」で分類する  

## 処理の流れ
1. OCR(着手中)  
領収書から日付を取得する  
領収書から住所と店名・駅名を取得し、経費の種類を判別する  
2. 形態素解析(未着手)  
取得した情報から形態素解析を行い、読み取った文字を修正する  
3. ラベリング(未着手)  
日付別、経費別にラベリングする  
GoogleMapのapiなどで領収書に記載されている店名・駅名から接待交際費か定期代か判定する  


# 使用モデル
- tesseract  
- OCR_Japanease  
  https://github.com/tanreinama/OCR_Japanease.git

# 前処理
- グレースケール
- 画像の二値化  
- ホモグラフィで画像の傾き補正  
- SwinIRによる超解像化  
  https://github.com/JingyunLiang/SwinIR.git

# OCR実行
OCR_Japaneaseでは縦向き・横向きを意識しない点が優れているが、文字認識・文字領域の精度はtesseractの方がよい  
飲食店の領収書は基本横向きであるため、tesseractで読み取る場合、領収書の種類にもよるが本システムで必要とする住所と店名が正しく認識できる時もある  
日付はかすれている領収書が多く、数値は正しく認識できるが年・月・日の文字が認識できないパターンがある  
定期代の領収書では縦書きと横書きが混在していることと、文字と文字の間隔が狭いため、ほとんど文字認識が正しくできていない  

# 現時点での結果
飲食店の領収書は、全ての文字を認識できてはいないが、領収書の種類によっては本システムで必要な情報を取れている  
定期代の領収書は、縦書き・横書きが混在している、文字通しの間隔が狭い、などの理由で必要な情報が取れない  
改善点としては縦書きと横書きの判定処理と文字通しを離すような前処理を追加する必要がある  

また、取得した情報で形態素解析ができるか検証する必要がある  
※全ての文字を正しく認識できているわけではないため  
形態素解析が難しい場合、日付・住所・店名のみで領収書のラベリングを行える仕組みを考える  
